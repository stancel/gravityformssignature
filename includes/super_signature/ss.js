/*
* Copyright 2019-2020, www.SuperSignature.com
* This code is not a freeware. You need to buy it before use!
* ver 1.5.0.4 September 2019

Hi!

If you came here for a reason. You know, " curiousity killed the cat ".
If you are in a risky mood, just drop us a line admin@supersignature.com

*/
var $ = jQuery.noConflict();
ValidateSignature=function(f){var h=!0;if(null==f||"undefined"==f||""==f)for(f=0;f<signObjects.length;f++){var A=signObjects[f];eval("obj"+A).IsValid()||(h=!1,isMobileIE||(document.getElementById(A).style.borderColor="red"))}else h=eval("obj"+f).IsValid(),isMobileIE||0!=h||(document.getElementById(f).style.borderColor="red");return h};ClearSignature=function(f){if(null==f||"undefined"==f||""==f)for(var h=0;h<signObjects.length;h++)f=signObjects[h],eval("obj"+f).ResetClick();else eval("obj"+f).ResetClick()};
ResizeSignature=function(f,h,A){eval("obj"+f).ResizeSignature(h,A)};SignatureColor=function(f,h){eval("obj"+f).SignatureColor(h)};SignatureBackColor=function(f,h){eval("obj"+f).SignatureBackColor(h)};SignaturePen=function(f,h){eval("obj"+f).SignaturePen(h)};SignatureEnabled=function(f,h){eval("obj"+f).SignatureEnabled(h)};SignatureStatusBar=function(f,h){eval("obj"+f).SignatureStatusBar(h)};SignatureTotalPoints=function(f){return eval("obj"+f).CurrentTotalpoints()};
UndoSignature=function(f){eval("obj"+f).UndoSignature()};LoadSignature=function(f,h){eval("obj"+f).LoadSignature(h)};TextSignature=function(f,h,A,J,e){eval("obj"+f).TextSignature(h,A,J,e)};var msie=window.navigator.userAgent.toUpperCase().indexOf("MSIE "),isIE=!1,isIENine=!1,isIETen=!1,isMobileIE=!1,isOperaMini=!1,isIETablet=!1,winTabletPointerEvt=!1,iever=getInternetExplorerVersion(),isPointer=!1,isAndroid=!1;0<window.navigator.userAgent.toUpperCase().indexOf("OPERA MINI")&&(isOperaMini=!0);
0<window.navigator.userAgent.toUpperCase().indexOf("OPERA MOBI")&&(isOperaMini=!0);function supports_canvas(){try{return document.createElement("canvas").getContext("2d"),!0}catch(f){return!1}}function getInternetExplorerVersion(){var f=-1;"Microsoft Internet Explorer"==window.navigator.appName&&null!=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(window.navigator.userAgent)&&(f=parseFloat(RegExp.$1));return f}
0<msie&&(isIE=!0,supports_canvas()&&(isIE=!1,9<=iever&&(isIENine=!0)),0<window.navigator.userAgent.toUpperCase().indexOf("IEMOBILE ")&&(isMobileIE=!0));isIETablet=/Tablet PC/i.test(window.navigator.userAgent);winTabletPointerEvt=!!window.navigator.msPointerEnabled;isIETablet||(0<window.navigator.userAgent.toUpperCase().indexOf("WINDOWS PHONE ")&&(isIETablet=!0),window.navigator.msMaxTouchPoints&&(isIETablet=!0));
function SuperSignature(f){function h(a,d,c){a.myEvents||(a.myEvents={});a.myEvents[d]||(a.myEvents[d]=[]);a=a.myEvents[d];a[a.length]=c}function A(a){return a.replace(/\s*((\S+\s*)*)/,"$1")}function J(a){return a.replace(/((\s*\S+)*)\s*/,"$1")}function e(a){if(null!=K&&"undefined"!=K)try{K.innerHTML=a+"...<br/>"+K.innerHTML}catch(d){alert(d.description)}}function ha(a){a=a.replace("undefined ","");a=a.replace("undefined","");var d="",c,b=0;a=a.replace(/\x0d\x0a/g,"\n");var t="";for(c=0;c<a.length;c++){var e=
	a.charCodeAt(c);128>e?t+=String.fromCharCode(e):(127<e&&2048>e?t+=String.fromCharCode(e>>6|192):(t+=String.fromCharCode(e>>12|224),t+=String.fromCharCode(e>>6&63|128)),t+=String.fromCharCode(e&63|128))}for(a=t;b<a.length;){var g=a.charCodeAt(b++);t=a.charCodeAt(b++);c=a.charCodeAt(b++);e=g>>2;g=(g&3)<<4|t>>4;var f=(t&15)<<2|c>>6;var h=c&63;isNaN(t)?f=h=64:isNaN(c)&&(h=64);d=d+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(g)+
	"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(f)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(h)}return d}function R(){l[0]=0;for(var a=1;a<l.length;a++)l[0]+=l[a];ia=l[0]>=ja?!0:!1;ka=l[0];a="";y[0]="1,"+F+","+la+","+u+","+v+","+ba+","+l[0]+","+q+";";for(var d=0;d<y.length;d++)a+=y[d];ca.value=1<y.length?ha(a):"";if(!isIE&&S)if(d="",0<B.length){for(var c=0;c<B.length;c++){var b=B[c];if(b.length)for(a=0;a<b.length;a++)d+=b[a].x+" "+b[a].y+
	",";else d=d+b.x+" "+b.y+",";d+=";"}da.value=ha(d);a=document.getElementById(q).toDataURL();ea.value="data:,"==a?"":a}else da.value="",ea.value=""}function ma(a){a.splice(0,1);for(var d=[],b=0;b<a.length;b++){var p=a[b].split(",");d.push({x:parseInt(p[0]),y:parseInt(p[1])})}return d}function na(a){b.clearRect(0,0,u,v);if(0<D.length){var d=new Image;$(d).bind("load",function(){});d.src=D}else SignatureBackColor(q,F);for(d=0;d<B.length;d++){var c=B[d],p=L[d].split(","),e=p[0];p=p[1];if(c.length)for(b.beginPath(),
																																																																																																																															  b.lineWidth=e,b.moveTo(c[0].x*a,c[0].y*a),e=1;e<=c.length-3;e+=3)b.bezierCurveTo(c[e].x*a,c[e].y*a,c[e+1].x*a,c[e+1].y*a,c[e+2].x*a,c[e+2].y*a),b.strokeStyle=p,b.stroke(),b.beginPath(),b.moveTo(c[e+2].x*a,c[e+2].y*a);else b.beginPath(),b.moveTo(c.x*a,c.y*a),b.arc(c.x*a,c.y*a,e/2,0,2*Math.PI,!1),b.strokeStyle=p,b.fill(),b.stroke();b.closePath()}}function wa(a){var d=curtop=0;if(T)d=$("#"+a.id).offset().left,curtop=$("#"+a.id).offset().top;else if(a.offsetParent){do d+=a.offsetLeft,curtop+=a.offsetTop;
while(a=a.offsetParent)}return[d,curtop]}function oa(){U=!0;fa=!1;if(0<w.length&&(y[x]=" "+w.join(" ")+";",!isIE&&S)){L.push(w[0]);var a=ma(w);0<a.length&&(a=new BezierCurves(a,30),B.push(a),na(1))}R();V.innerHTML=l[0]<ja?xa:ya;isIE?b.innerHTML=b.innerHTML:(b.closePath(),b.restore());r&&(W=X=0)}function Y(a){a.preventManipulation&&a.preventManipulation();a.preventDefault?a.preventDefault():a.returnValue&&(a.returnValue=!1);a.stopPropagation&&a.stopPropagation()}this.SignObject="";this.PenSize=3;this.PenColor=
	"#D24747";this.ClearImage=this.PenCursor="";this.BorderWidth="2px";this.BorderStyle="dashed";this.BorderColor="#DCDCDC";this.BackColor="#ffffff";this.BackImageUrl="";this.SignzIndex="99";this.SignWidth=450;this.SignHeight=250;this.CssClass="";this.ApplyStyle=!0;this.SignToolbarBgColor="transparent";this.RequiredPoints=50;this.ErrorMessage="Please continue your signature.";this.StartMessage="Please sign";this.SuccessMessage="Signature OK.";this.ImageScaleFactor=.5;this.Visible=this.Enabled=this.TransparentSign=
	!0;this.Edition="Trial";this.IsCompatible=!1;this.LicenseKey=this.InternalError="";this.IeModalFix=!1;this.ResetFunction=this.ErrorFunction=this.SuccessFunction="";this.SmoothSign=!0;this.forceMouseEvent=this.jQueryEvent=!1;for(var pa in f)this[pa]=f[pa];var x=0,r=!1,b=null,C=null,g=null,V=null,Z=null,ca=null,da=null,ea=null,K=null,G=this.Enabled,fa=!1,U=!1,y=[],w=[],l=[],B=[],L=[],qa=!1,z=this.PenSize,E=this.PenColor,F=this.BackColor,za=this.BorderColor,q=this.SignObject,u=this.SignWidth,v=this.SignHeight,
	ra=this.StartMessage,xa=this.ErrorMessage,ya=this.SuccessMessage,D=this.BackImageUrl,ia=!1,la=this.ImageScaleFactor,ba=this.TransparentSign,ja=this.RequiredPoints,ka=0,H=0,I=0,X=0,W=0,T=this.IeModalFix,aa=null,sa=0,ta=0,S=this.SmoothSign,Aa=this.jQueryEvent,M=!1,N=!1,O=!1,P=!1,Q=!1,ua=!1;if(isMobileIE){var k=new jsGraphics(q+"_Container");if(null!=k&&"undefined"!=k)try{k.clear(),k.paint()}catch(a){alert("Graphics object error "+a.description)}else alert("Graphics object error")}this.IsValid=function(){return ia};
	this.CurrentTotalpoints=function(){return ka};this.ReturnFalse=function(a){a.preventManipulation&&a.preventManipulation();a.preventDefault?a.preventDefault():a.returnValue=!1};this.XBrowserAddHandler=function(a,d,b){if(a.addEventListener)a.addEventListener(d,b,!1);else if(a.attachEvent)a.attachEvent("on"+d,b);else try{h(a,d,b),a["on"+d]=function(){if(a&&a.myEvents&&a.myEvents[d])for(var b=a.myEvents[d],c=0,e=b.length;c<e;c++)b[c]()}}catch(p){alert("Event attaching exception, "+p.description)}};this.DisableSelection=
		function(){isIE||("undefined"!=typeof g.style.MozUserSelect?g.style.MozUserSelect="none":g.style.cursor="default")};this.ResizeSignature=function(a,d){g.style.width=a+"px";g.style.height=d+"px";Z.style.width=a+"px";if(isIE)b.style.width=a+"px",b.style.height=d+"px";else{var c=document.getElementById(this.SignObject);c.width=parseInt(a,0);c.height=parseInt(d,0);c.style.width=a+"px";c.style.height=d+"px"}this.ResetClick();this.SignWidth=a;this.SignHeight=d;u=a;v=d};this.SignatureColor=function(a){E=
		this.PenColor=a};this.SignatureBackColor=function(a){F=this.BackColor=a;isIE?b.style.backgroundColor=a:(b.fillStyle=a,b.fillRect(0,0,u,v))};this.SignaturePen=function(a){z=this.PenSize=a};this.SignatureEnabled=function(a){G=this.Enabled=a};this.SignatureStatusBar=function(a){a?$("#"+Z.id).show("slow"):$("#"+Z.id).hide("slow")};this.UndoSignature=function(){if(2>=y.length)this.ResetClick();else{y.pop();B.pop();l.pop();L.pop();R();var a="'"+ca.value+"'";var b="",c=0;/[^A-Za-z0-9\+\/=]/g.exec(a);a=a.replace(/[^A-Za-z0-9\+\/=]/g,
		"");do{var p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(c++));var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(c++));var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(c++));var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(c++));p=p<<2|e>>4;e=(e&15)<<4|g>>2;var h=(g&3)<<6|f;b+=String.fromCharCode(p);64!=g&&(b+=String.fromCharCode(e));
		64!=f&&(b+=String.fromCharCode(h))}while(c<a.length);a=unescape(b);this.LoadSignature(a,1)}};this.LoadSignature=function(a,d){this.ResetClick();a=a.replace("undefined ","");a=a.replace("undefined","");if(null==d||"undefined"==d)d="1.0";d=parseFloat(d);wa(g);var c=J(A(a)).split(";");y[0]="";for(var e=0;e<c.length-1;e++)y[e]=c[e]+";";for(e=0;e<c.length-1;e++){var f=J(A(c[e])).split(" ");3==f.length&&f[2]==f[1]&&f.pop();L[e]=f[0];B[e]=new BezierCurves(ma(f),30)}e=c[0].split(",");F=e[1];u=e[3];v=e[4];
		ba=e[5];0==D.length&&this.SignatureBackColor(F);l[0]=0;e=1;for(f=c.length;e<f-1;e++){var h=J(A(c[e])).split(" ");l[e]=parseInt(h.length,0)-1;l[0]=parseInt(l[0],0)+parseInt(h.length,0);for(var k=0,w=h.length;k<w;k++){var n=h[k].split(","),m=n[0];n=n[1];if(0==k)this.SignaturePen(m),this.SignatureColor(n),b.strokeStyle=n,b.lineWidth=m;else if(1==k){m=Math.abs(parseInt(m,0)*d);n=Math.abs(parseInt(n,0)*d);if(isIE)if(isMobileIE)H=m,I=n;else{var r='"m'+m+","+n+" l"+m+","+n,C='<SuperSignature:shape id="'+
			q+"_l_"+(e-1)+'" style="position: absolute; left:0px; top:0px; width:'+u+"px; height: "+v+'px;" coordsize="'+u+","+v+'"><SuperSignature:path v='+r+' e" /><SuperSignature:fill on="false" /><SuperSignature:stroke weight="'+(z+'" color="'+E+'" /></SuperSignature:shape>');b.pathCoordString=r;b.insertAdjacentHTML("beforeEnd",C)}else b.beginPath(),b.lineJoin="round",b.lineCap="round",b.moveTo(m,n);2==h.length&&eval("obj"+q).DrawDot(m,n)}else if(m=Math.abs(parseInt(m,0)*d),n=Math.abs(parseInt(n,0)*d),isIE||
		S){if(b.pathCoordString+=" "+m+","+n,m=document.getElementById(q+"_l_"+(e-1)))if(m=m.firstChild)try{m.setAttribute("v",b.pathCoordString+" e")}catch(Ba){}}else b.strokeStyle=E,b.lineWidth=z,b.lineTo(m,n),b.stroke(),b.moveTo(m,n);isIE?b.innerHTML=b.innerHTML:(b.closePath(),b.restore())}x++}!isIE&&S&&na(d);R()};this.TextSignature=function(a,d,c,e){N&&(b.font=a,b.fillText(d,c,e))};this.CheckCompatibility=function(){if(isIE)this.IsCompatible=!0,isMobileIE||document.namespaces.SuperSignature||document.namespaces.add("SuperSignature",
		"urn:schemas-microsoft-com:vml","#default#VML");else{try{N=!!document.createElement("canvas").getContext("2d")}catch(a){N=!!document.createElement("canvas").getContext}N?this.IsCompatible=!0:document.write("Your browser does not support our signature control.")}};this.MouseMove=function(a){if(G&&fa){"undefined"!==typeof a.originalEvent&&(a=a.originalEvent);Y(a);var d=$("#"+g.id).offset();if(r&&"undefined"!==typeof a.targetTouches){var c=a.targetTouches[0];var f=c.clientX-X;c=c.clientY-W;T&&(c-=parseInt($(document).scrollTop()),
		f-=parseInt($(document).scrollLeft()))}else a.originalEvent?a.pageX?(f=parseInt(a.pageX-d.left),c=parseInt(a.pageY-d.top)):(f=parseInt(a.originalEvent.pageX-d.left),c=parseInt(a.originalEvent.pageY-d.top)):isIE||isIENine?(f=parseInt(a.x),c=parseInt(a.y),9<=iever&&(f=parseInt(a.pageX-d.left),c=parseInt(a.pageY-d.top))):(f=parseInt(a.pageX-d.left),c=parseInt(a.pageY-d.top));P&&Q&&(f=parseInt(a.offsetX||a.layerX),c=parseInt(a.offsetY||a.layerY));(M||O)&&-1==a.type.indexOf("touch")&&(f=a.clientX-C.getBoundingClientRect().left,
		c=a.clientY-C.getBoundingClientRect().top);isMobileIE?w.push(Math.abs(parseInt(f)-parseInt(g.offsetLeft))+","+Math.abs(parseInt(c)-parseInt(g.offsetTop))):w.push(Math.abs(parseInt(f))+","+Math.abs(parseInt(c)));l[x]++;if(isIE)if(isMobileIE){if(a=f-H,d=c-I,64<a*a+d*d){if(null!=k&&"undefined"!=k)try{k.setStroke(z),k.setColor(E),k.drawLine(H,I,f,c),k.paint()}catch(t){e("Drawing error: "+t.description)}else e("Graphics object NULL");H=f;I=c}}else{if(b.pathCoordString+=" "+f+","+c,f=document.getElementById(q+
		"_l_"+x))if(f=f.firstChild){try{f.setAttribute("v",b.pathCoordString+" e")}catch(t){}qa&&0==l[x]%8&&(b.innerHTML=b.innerHTML)}}else b.lineTo(f,c),b.stroke()}};this.DrawDot=function(a,d){l[x]++;isIE?b.insertAdjacentHTML("beforeEnd",'<SuperSignature:oval id="'+q+"_l_"+x+'" style="position: absolute; left:'+a+"px; top:"+d+"px; width:"+z+"px; height: "+z+'px;""><SuperSignature:stroke weight="'+(z+'" color="'+E+'" /></SuperSignature:oval>')):(b.arc(a,d,z/2,0,2*Math.PI,!1),b.fill(),b.stroke())};this.MouseOut=
		function(a){G&&(Y(a),e("Mouse out"),U||oa())};this.MouseUp=function(a){if(G){"undefined"!==typeof a.originalEvent&&(a=a.originalEvent);Y(a);e("Mouse up");if(null!=aa){var b=parseInt(new Date-aa);if(125>b){e("Time diff "+b);if(r)b=sa,a=ta;else{var c=$("#"+g.id).offset();a.originalEvent?a.pageX?(b=parseInt(a.pageX-c.left),a=parseInt(a.pageY-c.top)):(b=parseInt(a.originalEvent.pageX-c.left),a=parseInt(a.originalEvent.pageY-c.top)):isIE||isIENine?(b=parseInt(a.x),a=parseInt(a.y)):(b=parseInt(a.pageX-
		c.left),a=parseInt(a.pageY-c.top))}isIE&&(e("Drawing Dot At ("+b+","+a+")"),eval("obj"+q).DrawDot(b,a))}aa=null}U||oa()}};this.MouseDown=function(a){if(G){"undefined"!==typeof a.originalEvent&&(a=a.originalEvent);Y(a);aa=new Date;fa=!0;U=!1;if(r&&"undefined"!==typeof a.targetTouches){var d=a.targetTouches[0];X=C.getBoundingClientRect().left;W=C.getBoundingClientRect().top;var c=d.clientX-X;d=d.clientY-W;T&&(d-=parseInt($(document).scrollTop()),c-=parseInt($(document).scrollLeft()));sa=c;ta=d}else{var f=
		$("#"+g.id).offset();a.originalEvent?a.pageX?(c=parseInt(a.pageX-f.left),d=parseInt(a.pageY-f.top)):(c=parseInt(a.originalEvent.pageX-f.left),d=parseInt(a.originalEvent.pageY-f.top)):isIE||isIENine?9>iever?(c=parseInt(a.x),d=parseInt(a.y)):isIENine&&(c=parseInt(a.pageX)-parseInt(f.left)+parseInt($("html").css("margin-left")),d=parseInt(a.pageY)-parseInt(f.top)+parseInt($("html").css("margin-top")),10<=iever&&(c=parseInt(a.pageX-f.left),d=parseInt(a.pageY-f.top))):(c=parseInt(a.pageX-f.left),d=parseInt(a.pageY-
		f.top))}P&&Q&&(c=parseInt(a.offsetX||a.layerX),d=parseInt(a.offsetY||a.layerY));(M||O)&&-1==a.type.indexOf("touch")&&(c=a.clientX-C.getBoundingClientRect().left,d=a.clientY-C.getBoundingClientRect().top);e("Down ("+c+","+d+")");x++;l[x]=0;w.length=0;w[0]=z+","+E;isMobileIE?w.push(Math.abs(parseInt(c)-parseInt(g.offsetLeft))+","+Math.abs(parseInt(d)-parseInt(g.offsetTop))):w.push(Math.abs(parseInt(c))+","+Math.abs(parseInt(d)));isIE?isMobileIE?(H=c,I=d):(a='"m'+c+","+d+" l"+c+","+d,c='<SuperSignature:shape id="'+
		q+"_l_"+x+'" style="position: absolute; left:0px; top:0px; width:'+u+"px; height: "+v+'px;" coordsize="'+u+","+v+'"><SuperSignature:path v='+a+' e" /><SuperSignature:fill on="false" /><SuperSignature:stroke weight="'+(z+'" color="'+E+'" /></SuperSignature:shape>'),b.pathCoordString=a,b.insertAdjacentHTML("beforeEnd",c)):(b.save(),b.beginPath(),b.lineJoin="round",b.lineCap="round",b.strokeStyle=E,b.lineWidth=z,b.moveTo(c,d));return!1}};this.ResetClick=function(a){G&&(isMobileIE||(document.getElementById(q).style.borderColor=
		za),isIE?(b.innerHTML="",isMobileIE&&(I=H=0,null!=k&&"undefined"!=k&&(k.clear(),k.paint())),0<D.length&&(b.style.backgroundImage='url("'+D+'")')):(b.clearRect(0,0,u,v),0<D.length?isIE?b.style.backgroundImage='url("'+D+'")':(a=new Image,$(a).bind("load",function(){b.drawImage(this,0,0)}),a.src=D):SignatureBackColor(q,F)),y=[],w=[],l=[],B=[],L=[],R(),x=0,V.innerHTML=ra)};this.Init=function(){if(this.Visible){if(this.CheckCompatibility(),this.IsCompatible){if(N){if("DIV"==document.getElementById(this.SignObject).nodeName.toUpperCase()){var a=
		"<canvas ID='"+this.SignObject+"' width='"+u+"' height='"+v+"' style='left:0px;top:0px;position:absolute;'></canvas>";$("#"+this.SignObject).replaceWith(a);e("DIV changed to CANVAS");isIE=!1}}else"CANVAS"==document.getElementById(this.SignObject).nodeName.toUpperCase()&&(a="<div ID='"+this.SignObject+"' style='width:"+u+"px;height:"+v+"px;left:0px;top:0px;'></div>",$("#"+this.SignObject).replaceWith(a),e("CANVAS changed to DIV"),isIE=!0);K=document.getElementById(this.SignObject+"_Debug");b=document.getElementById(this.SignObject);
		g=document.getElementById(this.SignObject+"_Container");if(b.addEventListener)e("addEventListener supported");else if(b.attachEvent)e("attachEvent supported");else{e("Mouse events are not supported");return}this.mouseMoved=!1;if(null!=b&&"undefined"!=b){e("Objects OK");isIE&&!isMobileIE&&(qa=document.documentMode?8<=document.documentMode:!1);isMobileIE&&e("Mobile IE");isIENine&&e("IE 9 Or Above");isOperaMini&&e("Opera Mini, not supported.");l[0]=0;y[0]="1,"+F+","+la+","+u+","+v+","+ba+","+l[0]+","+
			q+";";if(this.ApplyStyle){e("Setting up style");g.style.zIndex=this.SignzIndex;try{isMobileIE?(g.style.borderWidth=this.BorderWidth,g.style.borderStyle=this.BorderStyle,g.style.borderColor=this.BorderColor,g.style.backgroundColor=this.BackColor,0<this.PenCursor.length&&(g.style.cursor="url('"+this.PenCursor+"'), pointer"),0<this.BackImageUrl.length&&(g.style.backgroundImage='url("'+this.BackImageUrl+'")')):(b.style.borderWidth=this.BorderWidth,b.style.borderStyle=this.BorderStyle,b.style.borderColor=
			this.BorderColor,b.style.backgroundColor=this.BackColor,0<this.PenCursor.length&&(b.style.cursor="url('"+this.PenCursor+"'), pointer"),0<this.BackImageUrl.length&&(b.style.backgroundImage='url("'+this.BackImageUrl+'")'),""!=this.CssClass&&(b.className=this.CssClass),b.style.width=this.SignWidth+"px",b.style.height=this.SignHeight+"px","auto"==b.style.cursor&&(b.style.cursor="url('"+this.PenCursor+"'), hand")),e("Style OK")}catch(va){e("Style Error : "+va.description)}}a='<div id="'+this.SignObject+
			'_toolbar" style="margin:5px;position:relative;height:20px;width:'+this.SignWidth+"px;background-color:"+this.SignToolbarBgColor+';"><img  id="'+this.SignObject+'_resetbutton" src="'+this.ClearImage+'" style="cursor:pointer;float:right;height:24px;width:24px;border:0px solid transparent" alt="Clear Signature" />';a+='<div id="'+this.SignObject+'_status" style="color:blue;height:20px;width:auto;padding:2px;font-family:verdana;font-size:12px;float:left;margin-right:30px;">'+this.StartMessage+"</div>";
			a+=null==document.getElementById(this.SignObject+"_data")?'<input type="hidden" id="'+this.SignObject+'_data" name="'+this.SignObject+'_data" value="">':"";a+=null==document.getElementById(this.SignObject+"_data_smooth")?'<input type="hidden" id="'+this.SignObject+'_data_smooth" name="'+this.SignObject+'_data_smooth" value="">':"";a+=null==document.getElementById(this.SignObject+"_data_canvas")?'<input type="hidden" id="'+this.SignObject+'_data_canvas" name="'+this.SignObject+'_data_canvas" value="">':
				"";a+="</div>";e("Setting up tools");$("#"+g.id).after(a);x=0;a="mousedown";var d="mouseup",c="mousemove",f="mouseout";isIE&&(f="mouseleave");isAndroid=-1<navigator.userAgent.toLowerCase().indexOf("android");!0===isAndroid&&e("Android device");window.PointerEvent&&!isAndroid?(e("Pointer events supported"),isPointer=!0,a="pointerdown",d="pointerup",c="pointermove",f="pointerleave"):e("NO Pointer events supported");r=/iPhone/i.test(navigator.userAgent)||/iPad/i.test(navigator.userAgent)||/Android/i.test(navigator.userAgent)||
				/playbook/i.test(navigator.userAgent)||/symbian/i.test(navigator.userAgent);r||isIE||(r="ontouchstart"in window||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints,e("Touch check "+r));isIETablet&&e("Found Tablet 2.0 or Windows Phone or Touch Screen Device");winTabletPointerEvt?(e("MSPointer supported"),a="MSPointerDown",d="MSPointerUp",c="MSPointerMove",f="MSPointerOut"):e("MSPointer NOT supported");"undefined"!=typeof b.style.msTouchAction&&(b.style.msTouchAction="none",$("#"+b.id).css("-ms-touch-action",
				"none"),e("MS Touch CSS added"));"undefined"!=typeof g.style.msTouchAction&&(g.style.msTouchAction="none",$("#"+g.id).css("-ms-touch-action","none"));isIE||(C=document.getElementById(this.SignObject),b=document.getElementById(this.SignObject).getContext("2d"),b.width=this.SignWidth,b.height=this.SignHeight);V=document.getElementById(this.SignObject+"_status");V.innerHTML=ra;Z=document.getElementById(this.SignObject+"_toolbar");ca=document.getElementById(this.SignObject+"_data");da=document.getElementById(this.SignObject+
				"_data_smooth");ea=document.getElementById(this.SignObject+"_data_canvas");var h=document.getElementById(this.SignObject+"_resetbutton");null!=h&&this.XBrowserAddHandler(h,"click",this.ResetClick);e("Attaching events");P=/Tablet PC 2.0/i.test(navigator.userAgent);Q=/rv:11.0/i.test(navigator.userAgent);ua=/Edge/i.test(navigator.userAgent);P&&Q&&e("IE Surface Fix");h=/Windows NT/i.test(navigator.userAgent);var k=/Chrome/i.test(navigator.userAgent);M=h&&k;ua&&(M=!1,O=!0);h&&P&&Q&&(O=!0);M&&(e("Chrome Surface Fix"),
				this.IeModalFix=!1);O&&(e("EDGE Surface Fix"),this.IeModalFix=!1);this.XBrowserAddHandler(b,"contextmenu",this.ReturnFalse);this.XBrowserAddHandler(g,"contextmenu",this.ReturnFalse);this.XBrowserAddHandler(g,"contextmenu",this.ReturnFalse);this.XBrowserAddHandler(g,"selectstart",this.ReturnFalse);this.XBrowserAddHandler(g,"dragstart",this.ReturnFalse);this.XBrowserAddHandler(b,"contextmenu",this.ReturnFalse);this.XBrowserAddHandler(b,"selectstart",this.ReturnFalse);this.XBrowserAddHandler(b,"dragstart",
				this.ReturnFalse);T=this.IeModalFix;e("IeModalFix "+this.IeModalFix);!this.IeModalFix||r||isIETablet?(isIE&&!isMobileIE?(this.XBrowserAddHandler(b,a,this.MouseDown),this.XBrowserAddHandler(b,d,this.MouseUp),this.XBrowserAddHandler(b,c,this.MouseMove)):(this.XBrowserAddHandler(g,a,this.MouseDown),this.XBrowserAddHandler(g,d,this.MouseUp),this.XBrowserAddHandler(g,c,this.MouseMove),this.XBrowserAddHandler(g,f,this.MouseOut)),this.XBrowserAddHandler(b,f,this.MouseOut)):(this.XBrowserAddHandler(g,a,this.MouseDown),
				this.XBrowserAddHandler(g,d,this.MouseUp),this.XBrowserAddHandler(g,c,this.MouseMove),this.XBrowserAddHandler(g,f,this.MouseOut),e("ModalFix event attached"));r&&(e("Found iPhone, iPad, Android or Touch Screen Device"),this.XBrowserAddHandler(g,"touchstart",this.MouseDown),this.XBrowserAddHandler(g,"touchend",this.MouseUp),this.XBrowserAddHandler(g,"touchmove",this.MouseMove));Aa&&(e("Attaching jQuery Events"),$(g).bind(a,this.MouseDown),$(g).bind(d,this.MouseUp),$(g).bind(c,this.MouseMove),r||$(g).bind(f,
				this.MouseOut));e("isIE "+isIE);e("isIE 9+ "+isIENine);(isIE||isIENine||isIETablet)&&e("IE Ver - "+iever);supports_canvas()&&e("Canvas - Yes");G||e("Control is disabled");e("Ready")}else e("Error initializing signature control")}}else e("Control hidden")}}; BezierCurves = function (a, t) { if (a.length < 2) { return a[0] } var b, tmpSmooth; this.points = []; for (var i = 0; i < a.length; i++) { b = new Smooth(a[i].x, a[i].y); b.CheckValid(tmpSmooth) || this.points.push(b), tmpSmooth = b; this.offSet = 0; this.error = t; this.result = []; this.result.push({ x: a[0].x, y: a[0].y + this.offSet }) } if (this.points.length == 1) { return a[0] } return this.fit() }; BezierCurves.prototype = { fit: function () { this.processFitPoints(0, this.points.length - 1, this.points[1].MathFunc2(this.points[0]).nOR(), this.points[this.points.length - 2].MathFunc2(this.points[this.points.length - 1]).nOR()); return this.result }, processFitPoints: function (n, t, i, r) { var e, c, u, l, o, f; if (t - n == 1) { var s = this.points[n], h = this.points[t], a = s.MathFunc6(h) / 3; this.savePoints([s, s.MathFunc1(i.nOR(a)), h.MathFunc1(r.nOR(a)), h]); return } for (e = this.cLP(n, t), c = Math.max(this.error, this.error * this.error), l = 0; l <= 4; l++) { if (o = this.gB(n, t, e, i, r), f = this.fM(n, t, o, e), f.error < this.error) { this.savePoints(o); return } if (u = f.index, f.error >= c) break; this.rP(n, t, e, o), c = f.error } var y = this.points[u - 1].MathFunc2(this.points[u]), p = this.points[u].MathFunc2(this.points[u + 1]), v = y.MathFunc1(p).MathFunc4(2).nOR(); this.processFitPoints(n, u, i, v), this.processFitPoints(u, t, v.MathFunc5(), r) }, savePoints: function (n) { this.result.push({ x: this.r2(n[1].x), y: this.r2(n[1].y + this.offSet) }), this.result.push({ x: this.r2(n[2].x), y: this.r2(n[2].y + this.offSet) }), this.result.push({ x: this.r2(n[3].x), y: this.r2(n[3].y + this.offSet) }) }, r2: function (n) { return Math.round(n * 100) / 100 }, gB: function (n, t, i, r, u) { for (var s = 1e-11, v = this.points[n], y = this.points[t], f = [[0, 0], [0, 0]], e = [0, 0], b, a, o, ut, ft, k, et, d, c = 0, g = t - n + 1; c < g; c++) { var h = i[c], l = 1 - h, nt = 3 * h * l, ot = l * l * l, tt = nt * l, it = nt * h, st = h * h * h, p = r.nOR(tt), w = u.nOR(it), rt = this.points[n + c].MathFunc2(v.MathFunc3(ot + tt)).MathFunc2(y.MathFunc3(it + st)); f[0][0] += p.dot(p), f[0][1] += p.dot(w), f[1][0] = f[0][1], f[1][1] += w.dot(w), e[0] += p.dot(rt), e[1] += w.dot(rt) } return b = f[0][0] * f[1][1] - f[1][0] * f[0][1], Math.abs(b) > s ? (ut = f[0][0] * e[1] - f[1][0] * e[0], ft = e[0] * f[1][1] - e[1] * f[0][1], a = ft / b, o = ut / b) : (k = f[0][0] + f[0][1], et = f[1][0] + f[1][1], a = Math.abs(k) > s ? o = e[0] / k : Math.abs(k) > s ? o = e[1] / et : o = 0), d = y.MathFunc6(v), s *= d, (a < s || o < s) && (a = o = d / 3), [v, v.MathFunc1(r.nOR(a)), y.MathFunc1(u.nOR(o)), y] }, rP: function (n, t, i, r) { for (var u = n; u <= t; u++) i[u - n] = this.fR(r, this.points[u], i[u - n]) }, fR: function (n, t, i) { for (var u = [], e = [], r = 0; r <= 2; r++) u[r] = n[r + 1].MathFunc2(n[r]).MathFunc3(3); for (r = 0; r <= 1; r++) e[r] = u[r + 1].MathFunc2(u[r]).MathFunc3(2); var h = this.eV(3, n, i), f = this.eV(2, u, i), c = this.eV(1, e, i), o = h.MathFunc2(t), s = f.dot(f) + o.dot(c); return Math.abs(s) < 1e-5 ? i : i - o.dot(f) / s }, eV: function (n, t, i) { for (var u = t.slice(), r, f = 1; f <= n; f++) for (r = 0; r <= n - f; r++) u[r] = u[r].MathFunc3(1 - i).MathFunc1(u[r + 1].MathFunc3(i)); return u[0] }, cLP: function (n, t) { for (var r = [0], u, i = n + 1; i <= t; i++) r[i - n] = r[i - n - 1] + this.points[i].MathFunc6(this.points[i - 1]); for (i = 1, u = t - n; i <= u; i++) r[i] /= r[u]; return r }, fM: function (n, t, i, r) { for (var o = Math.floor((t - n + 1) / 2), e = 0, u = n + 1; u < t; u++) { var h = this.eV(3, i, r[u - n]), f = h.MathFunc2(this.points[u]), s = f.x * f.x + f.y * f.y; s >= e && (e = s, o = u) } return { error: e, index: o} } }; Smooth = function (a, b) { this.x = a; this.y = b }; Smooth.prototype = { CheckPtArray: function (a) { return typeof a == "number" ? { x: a, y: a} : a }, MathFunc1: function (a) { a = this.CheckPtArray(a); return SmoothRet(this.x + a.x, this.y + a.y) }, MathFunc2: function (a) { a = this.CheckPtArray(a); return SmoothRet(this.x - a.x, this.y - a.y) }, MathFunc3: function (a) { a = this.CheckPtArray(a); return SmoothRet(this.x * a.x, this.y * a.y) }, MathFunc4: function (a) { a = this.CheckPtArray(a); return SmoothRet(this.x / a.x, this.y / a.y) }, MathFunc5: function () { return SmoothRet(-this.x, -this.y) }, MathFunc6: function (a, t) { var i = a.x - this.x, r = a.y - this.y, u = i * i + r * r; return t ? u : Math.sqrt(u) }, getLength: function () { var n = this.x * this.x + this.y * this.y; return arguments[0] ? n : Math.sqrt(n) }, nOR: function (n) { if (n === undefined) { n = 1 } var t = this.getLength(), i = t != 0 ? n / t : 0; return SmoothRet(this.x * i, this.y * i) }, CheckValid: function (a) { return a == null ? false : this.x == a.x && this.y == a.y }, dot: function (n) { return this.x * n.x + this.y * n.y } }; var SmoothRet = function (a, b) { return new Smooth(a, b) }; Compress = function (n, t) { var o = 0, s = 0, h = n.length, r = "", f, e, u, i; for (t = Math.pow(10, t), i = 0; i < h; i++) f = Math.round(n[i].y * t), e = Math.round(n[i].x * t), r += EncodeStr(f - o), r += EncodeStr(e - s), o = f, s = e; for (u = [["?", "0"], ["@", "1"], ["[", "2"], ["\\", "3"], ["]", "4"], ["^", "5"], ["`", "6"], ["{", "7"], ["|", "8"], ["}", "9"]], i = 0; i < u.length; i++) r = r.replaceAll(u[i][0], u[i][1]); return r }; EncodeStr = function (n) { var n = n << 1, t; for (n < 0 && (n = ~n), t = ""; n >= 32; ) t += String.fromCharCode((32 | n & 31) + 63), n >>= 5; return t + String.fromCharCode(n + 63) }; String.prototype.replaceAll = function (n, t, i) { return this.replace(new RegExp(n.replace(/([\/\,\!\\\^\$\{\}\[\]\(\)\.\*\+\?\|\<\>\-\&])/g, "\\$&"), i ? "gi" : "g"), typeof t == "string" ? t.replace(/\$/g, "$$$$") : t) };